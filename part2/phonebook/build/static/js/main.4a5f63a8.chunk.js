(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),u=n.n(c),o=n(14),i=n(2),l=function(e){var t=e.person,n=e.deleteButton;return r.a.createElement("li",null,t.name,": ",t.number,r.a.createElement("button",{onClick:n},"Delete"))},f=function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,"Search:"),r.a.createElement("form",{onSubmit:e.applyFilter},r.a.createElement("div",null,"Filter:",r.a.createElement("input",{onChange:e.handleSearch})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.setShowAll(!e.showAll)}},e.showAll?"Search":"Reset"))))},d=function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,"Add a new record:"),r.a.createElement("form",{onSubmit:e.addPerson},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},m=n(3),s=n.n(m),h="/api/persons",p=function(){return s.a.get(h).then(function(e){return e.data})},b=function(e){return s.a.post(h,e).then(function(e){return e.data})},E=function(e){return s.a.delete("".concat(h,"/").concat(e)).then(function(e){return e.data})},v=function(e,t){return s.a.put("".concat(h,"/").concat(e),t).then(function(e){return e.data})},w=function(e){var t=e.notification;return null===t?null:"notification"===t.type?r.a.createElement("div",{className:"notification"},t.text):"error"===t.type?r.a.createElement("div",{className:"error"},t.text):void 0},y=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),m=Object(i.a)(u,2),s=m[0],h=m[1],y=Object(a.useState)(""),j=Object(i.a)(y,2),O=j[0],S=j[1],g=Object(a.useState)(""),C=Object(i.a)(g,2),x=C[0],N=C[1],A=Object(a.useState)(null),T=Object(i.a)(A,2),k=T[0],D=T[1],B=Object(a.useState)(!0),F=Object(i.a)(B,2),J=F[0],L=F[1],P=J?n:n.filter(function(e){return e.name.toLowerCase().includes(x.toLowerCase())});Object(a.useEffect)(function(){p().then(function(e){c(e)})},[]);return r.a.createElement("div",null,r.a.createElement(w,{notification:k}),r.a.createElement(f,{applyFilter:function(e){e.preventDefault()},handleSearch:function(e){N(e.target.value)},showAll:J,setShowAll:L}),r.a.createElement(d,{handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){S(e.target.value)},addPerson:function(e){e.preventDefault();var t={name:s,number:O};if(n.map(function(e){return e.name}).includes(s))if(n.find(function(e){return e.name===s}).number!==O){var a="".concat(s," is already in the list, do you want to update the number?");if(!0===window.confirm(a)){var r=n.find(function(e){return e.name===s}),u=Object(o.a)({},r,{number:O}),i=n.find(function(e){return e.name===s}).id;v(i,u).then(function(e){c(n.map(function(t){return t.id!==i?t:e}))}).catch(function(e){D({text:"".concat(s," was already deleted from the server"),type:"error"}),setTimeout(function(){D(null)},5e3),c(n.filter(function(e){return e.id!==i}))}),D({text:"A number for ".concat(s," is updated to ").concat(O),type:"notification"}),setTimeout(function(){D(null)},5e3)}}else a="".concat(s," is already in the list"),window.alert(a);else b(t).then(function(e){c(n.concat(e)),h(""),S("")}).then(function(){D({text:"".concat(s," is added"),type:"notification"}),setTimeout(function(){D(null)},5e3)}).catch(function(e){console.log(e.response.data),D({text:"".concat(e.response.data.error),type:"error"}),setTimeout(function(){D(null)},5e3)})}}),r.a.createElement("div",null,r.a.createElement("h2",null,"Numbers"),r.a.createElement("ul",null,P.map(function(e){return r.a.createElement(l,{key:e.id,person:e,deleteButton:function(){return function(e){var t=n.find(function(t){return t.id===e}).name,a="Do you want to delete ".concat(t,"?");!0===window.confirm(a)&&(E(e).then(c(n.filter(function(t){return t.id!==e}))).catch(function(a){D({text:"".concat(t," was already deleted from the server"),type:"error"}),setTimeout(function(){D(null)},5e3),c(n.filter(function(t){return t.id!==e}))}),D({text:"A record for ".concat(t," was deleted"),type:"notification"}),setTimeout(function(){D(null)},5e3))}(e.id)}})}))))};n(38);u.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.4a5f63a8.chunk.js.map